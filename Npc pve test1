local Settings = {
    HitboxSize = 15, -- Bạn có thể chỉnh lên 15 như họ
    HitboxTransparency = 0.8, -- 0.8 để bạn nhìn thấy khối ảo, 1 là tàng hình hoàn toàn
    Distance = 1000,
    Enabled = true
}

local RunService = game:GetService("RunService")
local task = task -- Dùng task để tối ưu hiệu năng

-- Hàm tạo Hitbox ảo cho từng NPC
local function CreateFakeHitbox(model)
    if not model:FindFirstChild("Head") or model:FindFirstChild("FakeHitbox") then return end
    
    local head = model.Head
    local fakePart = Instance.new("Part")
    
    fakePart.Name = "FakeHitbox"
    fakePart.Parent = model
    fakePart.Size = Vector3.new(Settings.HitboxSize, Settings.HitboxSize, Settings.HitboxSize)
    fakePart.Transparency = Settings.HitboxTransparency
    fakePart.Color = Color3.fromRGB(255, 0, 0)
    fakePart.CanCollide = false -- Không gây kẹt đường đi
    fakePart.Anchored = false
    fakePart.Massless = true
    
    -- Gắn chặt khối ảo vào đầu NPC
    local weld = Instance.new("Weld", fakePart)
    weld.Part0 = fakePart
    weld.Part1 = head
    weld.C0 = CFrame.new(0, 0, 0)

    -- Đảm bảo khi NPC chết thì khối ảo biến mất
    local hum = model:FindFirstChildOfClass("Humanoid")
    if hum then
        hum.Died:Connect(function()
            fakePart:Destroy()
        end)
    end
end

-- Vòng lặp quét NPC (Tối ưu không gây lag)
task.spawn(function()
    while true do
        if Settings.Enabled then
            for _, obj in ipairs(workspace:GetChildren()) do
                -- Kiểm tra đúng tên NPC trong game của bạn (Male, Zombie, v.v.)
                if obj:IsA("Model") and (obj.Name == "Male" or obj.Name == "Zombie" or obj.Name == "Zombies") then
                    CreateFakeHitbox(obj)
                end
            end
        end
        task.wait(2) -- Quét NPC mới mỗi 2 giây để cực nhẹ máy
    end
end)

-- Cập nhật kích thước Hitbox theo Settings (Nếu bạn muốn đổi lúc đang chơi)
task.spawn(function()
    while task.wait(1) do
        for _, obj in ipairs(workspace:GetChildren()) do
            local fake = obj:FindFirstChild("FakeHitbox")
            if fake then
                if Settings.Enabled then
                    fake.Size = Vector3.new(Settings.HitboxSize, Settings.HitboxSize, Settings.HitboxSize)
                else
                    fake.Size = Vector3.new(0.01, 0.01, 0.01) -- Thu nhỏ khi tắt
                end
            end
        end
    end
end)

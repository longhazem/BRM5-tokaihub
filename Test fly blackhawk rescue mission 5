--[[ 
    --uhsh--
    SỐ THỨ TỰ: 06 (Bản lách Anti-Cheat bằng Lực Vật Lý)
    CHỨC NĂNG: GIỮ NHÂN VẬT ĐỨNG YÊN TRÊN KHÔNG (KHÔNG TẠO PART)
    --uhsh--
]]

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer
local char = player.Character or player.CharacterAdded:Wait()
local hrp = char:WaitForChild("HumanoidRootPart")
local hum = char:WaitForChild("Humanoid")

-- --- CẤU HÌNH ---
local isEnabled = false
local currentHeight = 0
local bodyVelocity = nil

-- --- TẠO GIAO DIỆN ---
local sg = Instance.new("ScreenGui")
sg.Name = "BypassUI"
sg.IgnoreGuiInset = true
sg.DisplayOrder = 9999
sg.Parent = player:WaitForChild("PlayerGui")

local btn = Instance.new("TextButton")
btn.Size = UDim2.new(0, 180, 0, 50)
btn.Position = UDim2.new(0.5, -90, 0.05, 0)
btn.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
btn.Text = "FLY PLATFORM: OFF"
btn.TextColor3 = Color3.fromRGB(255, 80, 80)
btn.Font = Enum.Font.GothamBold
btn.TextSize = 16
btn.Parent = sg

local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 10)
corner.Parent = btn

-- --- LOGIC ĐIỀU KHIỂN ---
local function togglePlatform()
    isEnabled = not isEnabled
    
    if isEnabled then
        btn.Text = "FLY PLATFORM: ON"
        btn.TextColor3 = Color3.fromRGB(0, 255, 255)
        currentHeight = hrp.Position.Y -- Khóa độ cao tại thời điểm bật
        
        -- Tạo lực giữ người không rơi
        bodyVelocity = Instance.new("BodyVelocity")
        bodyVelocity.Name = "AntiGravityForce"
        bodyVelocity.Velocity = Vector3.new(0, 0, 0)
        bodyVelocity.MaxForce = Vector3.new(0, math.huge, 0) -- Chỉ khóa chiều dọc (Y)
        bodyVelocity.Parent = hrp
    else
        btn.Text = "FLY PLATFORM: OFF"
        btn.TextColor3 = Color3.fromRGB(255, 80, 80)
        
        if bodyVelocity then
            bodyVelocity:Destroy()
            bodyVelocity = nil
        end
    end
end

btn.MouseButton1Click:Connect(togglePlatform)

-- --- GIỮ ĐỘ CAO LIÊN TỤC ---
RunService.RenderStepped:Connect(function()
    if isEnabled and bodyVelocity and hrp then
        -- Ép chiều cao nhân vật luôn bằng với lúc mới bật
        -- Cách này giúp bạn đi trên không mà không cần block
        local currentPos = hrp.Position
        hrp.CFrame = CFrame.new(currentPos.X, currentHeight, currentPos.Z) * hrp.CFrame.Rotation
        
        -- Nếu bạn nhảy, chúng ta cập nhật lại độ cao mới
        if hum.Jump then
            task.wait(0.1)
            currentHeight = hrp.Position.Y
        end
    end
end)

-- Cập nhật lại khi chết/hồi sinh
player.CharacterAdded:Connect(function(newChar)
    char = newChar
    hrp = char:WaitForChild("HumanoidRootPart")
    hum = char:WaitForChild("Humanoid")
    if isEnabled then
        isEnabled = false
        togglePlatform()
    end
end)

-- --uhsh-- KẾT THÚC --uhsh--
